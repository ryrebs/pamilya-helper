<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Profile</title>
    {{ template "header" . }}
  </head>
  <body>
    <div class="container-xxl bg-white p-0">
      <!-- Spinner Start -->
      <div
        id="spinner"
        class="show bg-white position-fixed translate-middle w-100 vh-100 top-50 start-50 d-flex align-items-center justify-content-center"
      >
        <div
          class="spinner-border text-primary"
          style="width: 3rem; height: 3rem"
          role="status"
        >
          <span class="sr-only">Loading...</span>
        </div>
      </div>
      <!-- Spinner End -->

      <!-- Navbar Start -->
      {{ template "navbar" . }}
      <!-- Navbar End -->

      <!-- Profile details  -->
      {{ if not .data.is_admin }}
      <div>
        <div>
          <span style="font-weight: bold">{{ .data.name }}</span>
          <div>
            {{ if.data.is_verified }}
            <span>Verified</span>
            {{ else }}
            <span>Unverified</span>
            {{ end }}
          </div>
        </div>
        <div>
          <span>Email: {{ .data.email }}</span>
        </div>
        <div><span>Birthdate: {{ .data.birthdate }}</span></div>
        <div><span>Address: {{ .data.address }}</span></div>
        <div>
          {{ if.data.is_verified }}
          <div><span>Valid Government Id: {{ .data.gov_id }}</span></div>
          {{ else }}
          <div>
            <button>
              <a href="/users/profile/verify"> Account Verification </a>
            </button>
          </div>
          {{ end }}
        </div>
      </div>
      {{ end }}

      <!-- Account verificatin view for admins -->
      {{ if .data.is_admin }}
      <div>
        <div style="text-align: center">
          <span>Admin Manual Verification</span>
        </div>
        <div class="user-box-container">
          {{ range .data.accounts }}
          <div class="user-box">
            <form method="post" action="/admin/verify/user">
              <div class="user-box__detail">{{ .Name }}</div>
              <div class="user-box__detail">
                <span>Email: {{ .Email }}</span>
                <input type="text" name="email" value="{{ .Email }}" hidden />
              </div>
              <div class="user-box__detail">
                <span>Birthday: </span>{{ .Birthdate }}
              </div>
              <div class="user-box__detail">
                <span>Address: </span>{{ .Address }}
              </div>
              <div class="user-box__detail">
                <span
                  >Government ID:
                  <a href="/uploads/{{ .GovId }}" class="gov_id"
                    >{{ .GovId }}</a
                  ></span
                >
              </div>
              <div class="user-box__btns">
                <button type="submit" name="action" value="accept">
                  Accept
                </button>
                <button type="submit" name="action" value="reject">
                  Reject
                </button>
              </div>
            </form>
          </div>
          {{ end }}
        </div>
      </div>
      {{ end }}

      <!-- Body -->
      <form method="POST" , action="/users/signout">
        <button type="submit">
          <span id="user-logout-link">Logout</span>
        </button>
      </form>
      {{ template "footer" . }}
  </body>
</html>
